<?xml version="1.0" encoding="utf-8" ?>
<configuration>
	<configSections>
		<section name="BlogConfigurationSettings" type="Subtext.Framework.Util.XmlSerializerSectionHandler, Subtext.Framework" />
		<section name="HandlerConfiguration" type="Subtext.Framework.Util.XmlSerializerSectionHandler, Subtext.Framework" />
		<section name="SyndicationCompression" type="Subtext.Framework.Syndication.Compression.SyndicationCompressionSectionHandler, Subtext.Framework" />
		<section name="ObjectProvider" type="Subtext.Extensibility.Providers.ProviderSectionHandler, Subtext.Extensibility" />
		<section name="Database" type="Subtext.Extensibility.Providers.ProviderSectionHandler, Subtext.Extensibility" />
		<section name="Search" type="Subtext.Extensibility.Providers.ProviderSectionHandler, Subtext.Extensibility" />
		<section name="Email" type="Subtext.Extensibility.Providers.ProviderSectionHandler, Subtext.Extensibility" />
		<section name="Installation" type="Subtext.Extensibility.Providers.ProviderSectionHandler, Subtext.Extensibility" />
		<section name="Import" type="Subtext.Extensibility.Providers.ProviderSectionHandler, Subtext.Extensibility" />
		<section name="BlogEntryEditor" type="Subtext.Extensibility.Providers.ProviderSectionHandler, Subtext.Extensibility" />
		<section name="AllowableCommentHtml" type="System.Configuration.NameValueSectionHandler,System,Version=1.0.5000.0,Culture=neutral, PublicKeyToken=b77a5c561934e089" />
		<section name="FriendlyUrlSettings" type="System.Configuration.NameValueSectionHandler,System,Version=1.0.5000.0,Culture=neutral, PublicKeyToken=b77a5c561934e089" />
		<section name="BlogMLProvider" type="Subtext.Extensibility.Providers.ProviderSectionHandler, Subtext.Extensibility" />
		<section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
		<section name="STPluginConfiguration" type="Subtext.Extensibility.Plugins.PluginSectionHandler, Subtext.Framework"/>
	</configSections>

	<connectionStrings>
        <add name="subtextData" connectionString="Server=localhost;Database=SubtextData;Trusted_Connection=True" />
    </connectionStrings>

	<STPluginConfiguration>
		<pluginlist>
			<add name = "TestPlugin" type = "Subtext.Plugins.Examples.TestPlugin.TestPlugin, Subtext.Plugins.Examples">
				<modules>
					<add key="blogsettings" filename="settings.ascx" />
					<add key="entrysettings" filename="blogSettings.ascx" />
				</modules>
				<defaultSettings>
					<add key="defaultValue1" value="value1" />
					<add key="defaultValue2" value="value2" />
				</defaultSettings>
			</add>
			<add name = "Test2Plugin" type = "Subtext.Plugins.Examples.Test2Plugin.Test2Plugin, Subtext.Plugins.Examples">
				<modules>
					<add key="blogsettings" filename="settings.ascx" />
					<add key="entrysettings" filename="blogSettings.ascx" />
				</modules>
				<defaultSettings>
					<add key="defaultValue1" value="value1" />
					<add key="defaultValue2" value="value2" />
				</defaultSettings>
			</add>
		</pluginlist>
	</STPluginConfiguration>

	<FriendlyUrlSettings>		
		<add key="separatingCharacter" value="_" />
		<add key="limitWordCount" value="5" />
	</FriendlyUrlSettings>

	<!--
		This section contains a set of key / value pairs to indicate which HTML tags
		are allowed in comments. The key contains the tag (such as 'strong' or 'a')
		and the value is a comma delimited set of attributes that tag may have.
		If no attributes are allowed, set value=""
	-->
	<AllowableCommentHtml>
		<add key="a" value="href,title"/>
		<add key="b" value=""/>
		<add key="strong" value=""/>
		<add key="blockquote" value="cite"/>
		<add key="i" value=""/>
		<add key="em" value=""/>
		<add key="u" value=""/>
		<add key="strike" value=""/>
		<add key="super" value=""/>
		<add key="sub" value=""/>
		<add key="code" value=""/>
	</AllowableCommentHtml>
  
  <!-- 
		This is a REQUIRED provider that essentially configures an Object Data Source 
		for Subtext.  Access to the Object Data Sources are typically wrapped via classes 
		such as Entries.  This provider also abstracts the underlying database, whether it be 
		SQL, Access, MySQl, Oracle, or whatever.
	-->
  <ObjectProvider defaultProvider="DatabaseObjectProvider">
    <providers>
      <add name="DatabaseObjectProvider"
           type="Subtext.Framework.Data.DatabaseObjectProvider, Subtext.Framework" 
           connectionStringName="subtextData" />
    </providers>
  </ObjectProvider>

  <Search defaultProvider="EntrySearchProvider">
    <providers>
      <add name="EntrySearchProvider"
           type="Subtext.Framework.Providers.EntrySearchProvider, Subtext.Framework"
           connectionStringName="subtextData" />
    </providers>
  </Search>

	<system.net>
		<mailSettings>
			<smtp deliveryMethod="Network"
				 from="admin@YOURBLOG.com">
				<!-- Change to match your mail server settings 
					
					If your SMTP server requires authentication, you may add.
				
						userName="yourusername"
						password="yourpassword"
				-->
				<network 
					host="localhost" 
					port="25" 
					defaultCredentials="true" />
			</smtp>
		</mailSettings>
	</system.net>

	<!-- Mail Server Settings Are Set Above in the system.net/mailSettings/smtp section -->
	<Email defaultProvider="UnitTestEmailProvider">
		<providers>
			<add name="SystemMailProvider" type="Subtext.Framework.Providers.SystemMailProvider, Subtext.Framework" />
			<add name="DotNetOpenMailProvider" type="Subtext.Framework.Providers.DotNetOpenMailProvider, Subtext.Framework" />
			<add name="UnitTestEmailProvider" type="UnitTests.Subtext.UnitTestEmailProvider, UnitTests.Subtext" />
		</providers>
	</Email>

	<BlogMLProvider defaultProvider="SubtextBlogMLProvider">
		<providers>
			<add name="SubtextBlogMLProvider" type="Subtext.ImportExport.SubtextBlogMLProvider, Subtext.Framework" connectionStringName="subtextData" />
		</providers>
	</BlogMLProvider>

	<Installation defaultProvider="SqlInstallerProvider">
		<providers>
            <add name="SqlInstallerProvider" type="Subtext.Installer.SqlInstallerProvider, Subtext.Installation" connectionStringName="subtextData" />
        </providers>
    </Installation>

    <Import defaultProvider="DotText095ImportProvider">
		<providers>
			<add name="DotText095ImportProvider"
				type="Subtext.Installation.Import.DotText095ImportProvider, Subtext.Installation"
				description=".TEXT 0.95 Import Provider."
			/>
			
			<add name="UnitTestImportProvider"
				type="UnitTests.Subtext.UnitTestImportProvider, UnitTests.Subtext" />

		</providers>
	</Import>

	<!--
		Configuration from BlogEntryEditor provider
		Remember the trailing / at the end of all path
		This section works like any other provider section, so, to enable one provider,
		just write its name in the defaultProvider attribute
	-->
	<BlogEntryEditor defaultProvider="FtbBlogEntryEditorProvider">
		<providers>
			<add name="FtbBlogEntryEditorProvider"
					  type="Subtext.Web.Providers.BlogEntryEditor.FTB.FtbBlogEntryEditorProvider, Subtext.Web"
					  description="FreeTextBox BlogEntryEditor Provider"
					  toolbarlayout="Bold,Italic,Underline,Strikethrough;Superscript,Subscript,RemoveFormat|FontFacesMenu,FontSizesMenu,FontForeColorsMenu|InsertTable|JustifyLeft,JustifyRight,JustifyCenter,JustifyFull;BulletedList,NumberedList,Indent,Outdent;CreateLink,Unlink,Insert,InsertRule|Cut,Copy,Paste;Undo,Redo|ieSpellCheck,WordClean|InsertImage,InsertImageFromGallery"
					  FormatHtmlTagsToXhtml="true"
					  RemoveServerNamefromUrls="false"
					  WebFormFolder="~/Providers/BlogEntryEditor/FTB/"
					/>
			<!--
					The following provider allow FCKeditor to be used as rich text editor inside SubText
					Configuration parameters are:
					WebFormFolder: the path where the provider files are located (default should be ~/Providers/RichTextEditor/FCKeditor/)
					ToolbarSet: the set of toolbar buttons to use, the possibilities are Default,Basic,SubText, but the best is SubText
					Skin: the style of the toolbar buttons [default|office2003|silver]
					******** connector related settings ********
					ImageBrowserURL: the path where the ImageBrowser is located (don't change unless you know what you are doing)
					LinkBrowserURL: the path where the LinkBrowser is located (don't change unless you know what you are doing)
					ImageConnectorURL: the path where the connector for the ImageBrowser is located (don't change unless you know what you are doing)
					LinkConnectorURL: the path where the connector for the LinkBrowser is located (don't change unless you know what you are doing)
					FileAllowedExtensions: extensions to be retrieved when the connector lists files (.* means all)
					ImageAllowedExtensions: extensions to be retrieved when the connector lists images (.* means all)
				-->
			<add name="FCKeditorBlogEntryEditorProvider"
					  type="Subtext.Providers.BlogEntryEditor.FCKeditor.FckBlogEntryEditorProvider, Subtext.Providers.BlogEntryEditor.FCKeditor"
					  description="FCKeditor RichTextEditor Provider"
					  WebFormFolder="~/Providers/BlogEntryEditor/FCKeditor/"
					  ToolbarSet="SubText"
					  Skin="office2003"
					  ImageBrowserURL="~/Providers/BlogEntryEditor/FCKeditor/editor/filemanager/browser/default/browser.html?Type=Image&amp;Connector={0}"
					  LinkBrowserURL="~/Providers/BlogEntryEditor/FCKeditor/editor/filemanager/browser/default/browser.html?Connector={0}"
					  ImageConnectorURL="~/Providers/BlogEntryEditor/FCKeditor/editor/filemanager/browser/default/connectors/aspx/connector.aspx"
					  LinkConnectorURL="~/Providers/BlogEntryEditor/FCKeditor/editor/filemanager/browser/default/connectors/aspx/connector.aspx"
					  FileAllowedExtensions=".*"
					  ImageAllowedExtensions="jpg|gif|png"
					/>
			<add name="PlainTextBlogEntryEditorProvider"
					  type="Subtext.Web.Providers.BlogEntryEditor.PlainText.PlainTextBlogEntryEditorProvider, Subtext.Web"
					  description="Plain text BlogEntryEditor Provider"
					  cols="10"
					  rows="10"
					  cssClass="txt"
					/>
		</providers>
	</BlogEntryEditor>
	
	<!--
		Supported Types "gzip|deflate"
		Supported Levels "normal|low|high"		
	-->
	<SyndicationCompression type="gzip" level="high" />

	<BlogConfigurationSettings type="Subtext.Framework.Configuration.BlogConfigurationSettings, Subtext.Framework">

			<Tracking 
				enableAggBugs = "true" 
				enableWebStats = "true" 
				queueStats = "true" 
				queueStatsCount = "5" 
				enableTrackBacks = "true" 
				enablePingBacks = "true" 
				pingWeblogs = "true" />
		<!--	
			Checkout Subtext.Framework.Security for hashing passwords.  
			This should be set when first installing the application 
			and really shouldn't be changed afterwards.	
		-->
		<UseHashedPasswords>true</UseHashedPasswords>
	    
		<!-- Globally control access to web services -->
		<AllowServiceAccess>true</AllowServiceAccess>
	  
		<AllowImages>true</AllowImages>
	  
		<!-- Globally control use of XHTML -->
		<UseXHTML>true</UseXHTML>
	   
		<!-- Default Item Count -->
		<ItemCount>25</ItemCount>
	 
		<!-- Default Server Time Zone -->
		<ServerTimeZone>-8</ServerTimeZone>
		
		<!-- Default Days Till Comments Close 
		-->
		<DaysTillCommentsClose>30</DaysTillCommentsClose>

		<!-- Whether or not to GZIP the RSS and/or atom feeds. -->
		<UseSyndicationCompression>true</UseSyndicationCompression>
	</BlogConfigurationSettings>

	<appSettings>
        <add key="UnitTestKey" value="UnitTestValue"/>

		<!-- 
			Proxy for web requests such as trackbacks and Akismet. 
			This may be required in Medium Trust hosting environments. 
			Check with your admin.
		-->
		<add key="ProxyHost" value="localhost" />
		<add key="ProxyPort" value="8080" />
		<add key="ProxyUsername" value="phil" />
		<add key="ProxyPassword" value="not-telling-you" />
		
		<!-- Aggregate Blog Stuff -->
		<add key="AggregateTitle" value = "A Subtext Community" />
		<add key="AggregateUrl" value = "http://localhost/Subtext.Web" />
		<add key="AggregateDescription" value = ".NET by Subtext" />
		<add key="AggregateHost" value = "localhost" />

		<!--UI Text -->		
		<add key="PostCollection" value = "Post Categories" />
		<add key="ArticleCollection" value = "Article Categories" />
		<add key="ImageCollection" value = "Image Galleries" />
		<add key="Archives" value="Archives" />
	</appSettings>

	<log4net>
		<appender name="Console" type="log4net.Appender.ConsoleAppender">
			<layout type="log4net.Layout.PatternLayout">
				<conversionPattern value="%-4r [%t] %-5p %c %x - %m%n" />
			</layout>
		</appender>

		<root>
			<level value="DEBUG" />
			<appender-ref ref="Console" />
		</root>
	</log4net>

	<system.web>
		<membership defaultProvider="SubtextMembershipProvider">
			<providers>
				<clear/>
				<add 
					name="SubtextMembershipProvider"
					type="Subtext.Framework.Security.SubtextMembershipProvider, Subtext.Framework"
					connectionStringName="subtextData"
					enablePasswordRetrieval="false"
					enablePasswordReset="true"
					requiresQuestionAndAnswer="true"
					requiresUniqueEmail="true"
					passwordFormat="Hashed"
					minRequiredPasswordLength="4"
					minRequiredNonalphanumericCharacters="0"
				/>
				<!-- //TODO Change passwordFormat to Hashed -->
			</providers>
		</membership>

		<roleManager enabled="true" defaultProvider="SubtextRoleProvider">
			<providers>
				<clear/>
				<add name="SubtextRoleProvider"
					type="Subtext.Framework.Security.SubtextRoleProvider, Subtext.Framework"
					connectionStringName="subtextData"
					applicationName="/"
				/>
			</providers>
		</roleManager>
	</system.web>
</configuration>
